{% extends 'base.html' %}
{% load static client_status_tags i18n %}

{% block title %} - Mijn cli&euml;nten{% endblock %}

{% block breadcrumb %}
    <nav class="breadcrumb screen-only" aria-label="Kruimelpad">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-step"><a href="{% url 'home' %}">Home</a></li>
            <li class="breadcrumb-step sr-only" aria-current="location">Mijn cli&euml;nten</li>
        </ol>
    </nav>
{% endblock %}

{% block main %}
<section class="section section--mijn-clienten">
    <h2>Mijn cli&euml;nten</h2>

    <div class="form-field form-field--buttons screen-only">
        <a href="{% url 'create_case' 'basis-gegevens' %}" class="button button--primary">Nieuwe cliÃ«nt</a>
    </div>
{#    <div class="form-field form-field--buttons screen-only">#}
{#        <a href="{% url 'create_case' 'aanvraag-omslag-en-urgentie' %}" class="button button--secondary">Nieuwe aanvraag urgentie onder voorwaarden</a>#}
{#        <a href="{% url 'create_case' 'aanvraag-omklap' %}" class="button button--secondary">Nieuwe aanvraag omklap</a>#}
{#    </div>#}
    <p>{{ object_list.paginator.count }}{% if object_list.paginator.count == 1 %} resultaat{% else %} resultaten{% endif %}</p>
    <table class="case-list table--interactive">
        <thead>
            <tr>
                <th width="200">Naam</th>
                {% for form in FORMS_PROCESSTAP_CHOICES %}
                <th>{{ form.1 }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for object in object_list %}
                <tr>
                    <td>
                        <a href="{% url 'case' object.id %}">
                            <span class="show-on-mobile">Naam:</span>
                            {{ object.client_name }}
                        </a>
                    </td>
                    {% for form in FORMS_PROCESSTAP_CHOICES %}
                    <td>
                        {% client_submitted_form object form.0 as case_status %}
                        {% if case_status %}
                        <a href="{% url 'case' object.id %}" aria-hidden="true">
                            {{ case_status.status|status_verbose }} ({{ case_status.created|date:"j b Y H:i" }})
                        </a>
                        <span class="sr-only">{{ case_status.status|status_verbose }} ({{ case_status.created|date:"j b Y H:i" }})</span>
                        {% else %}
                        <a href="{% url 'case' object.id %}" aria-hidden="true">
                            <span>Deze stap is nog niet ingediend</span>
                        </a>
                        {% endif %}
                    </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% include 'core/pagination.html' with object_list=object_list filter_params='' %}
</section>
{% endblock %}
